<?xml version="1.0" encoding="UTF-8"?>
<project name="build-brainfarm-java" default="build" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant">

	<property file="build.properties"/>
		
	<taskdef resource="org/apache/ivy/ant/antlib.xml"
		         uri="antlib:org.apache.ivy.ant" 
				 classpath="../lib/${ivy.lib}.jar"/>	
	
	<path id="classpath">
		<fileset dir="../lib">
			<include name="**/*.jar"/>
		</fileset>
    </path>
	
	<target name="retrieve" unless="library.installed" description="Retrieves the libraries if needed">
		<ivy:retrieve pattern="${basedir}/../lib/[artifact].[ext]"/>
	</target>
	
	<target name="compile">
		<mkdir dir="../bin/classes"/>
		<javac srcdir="../src" destdir="../bin" classpathref="classpath"/>
	</target>
	
	<target name="build" depends="retrieve,compile">
		<jar jarfile="../jar/brainfarm-java-${version}.jar" basedir="../bin"/>
	</target>
	
</project>
